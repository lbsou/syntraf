<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.datatables.net/1.10.24/css/dataTables.bootstrap4.min.css">
        <link rel="stylesheet" href="/static/theme/darkly/bootstrap.min.css">
        <link rel='stylesheet' href="{{ url_for('static', filename='fontawesome-free-5.15.3-web/css/all.css')}}">

        <title>SYNTRAF</title>
        <style>body { padding-top: 70px; }</style>
        {% block head %}{% endblock %}
    </head>

    <body class="px-3">
        <nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary">
          <a class="navbar-brand" href="home.html">Home</a>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>

          <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">

              <li class="nav-item">
                <a class="nav-link" href="maps.html">Maps</a>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Clients</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="stats.html">Status</a>
                  <a class="dropdown-item" href="clients_configuration.html">Configuration</a>
                </div>
              </li>
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Configurations</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="global_config.html">Global</a>
                  <a class="dropdown-item" href="database_config.html">Databases</a>
                  <a class="dropdown-item" href="mesh_group_config.html">Mesh groups</a>
                  <a class="dropdown-item" href="client_config.html">Clients</a>
                  <a class="dropdown-item" href="server.html">Server</a>
                </div>
              </li>
            </ul>
          </div>
            <div>
                SYNTRAF v{{ syntraf_version }}
            </div>
        </nav>
        <script src="/static/js/jquery-3.6.0.min.js"></script>
        <script src="/static/js/popper.min.js"></script>
        <script src="/static/js/bootstrap.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>
        <script src="/static/fontawesome-free-5.15.3-web/js/fontawesome.min.js"></script>
        <!-- Your page content -->
        {% block content %}{% endblock %}
    </body>
</html>

<script>

setInterval(get_client_number_by_status, 5000)

async function get_client_number_by_status()
{
    const fd = new FormData();
    fd.append('ACTION', "GET_NUMBER_OF_ONLINE_CLIENT");

    // send `POST` request
    const response = await fetch('/api', {
        method: 'POST',
        body: fd
    })

    client_status = await response.text();
        client_status = JSON.parse(client_status);
        //console.log(client_status);
        //alert(client_status);

}

</script>